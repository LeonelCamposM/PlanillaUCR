@page "/Projects/{email}"
@using Presentation.Authentication
@inject NavigationManager nav

<Authenticator email="@email" SendAuthenticationState="ReceiveAuthenticationState"> </Authenticator>
@if (_loading)
{
    <MudText> loading</MudText>
}
else
{
    if (authenticationState == true && _loading == false)
    {
        //Authorized
        <MudText>Visión del producto para @email</MudText>
        <MudText>Página de projectos @email </MudText>

       @* // View Project Employees
        nav.NavigateTo($"/View_Project_Employees/{email}/{projectName}");*@

        @*// Hire Project Employees
        nav.NavigateTo($"/Hire_Employees/{email}/{projectName}");*@

        // View deductions 
        //nav.NavigateTo($"/Projects/{email}/{projectName}/Deductions");

        // View benefits 
        nav.NavigateTo($"/Projects/{email}/{projectName}/Benefits");
    }
    else
    {
        //Unauthorized
        nav.NavigateTo("/Visitor");
    }
}


@code{
    string projectName = "PROy1";

     bool _loading = true;
    bool authenticationState = false;
    private int currentCount = 0;

    [Parameter]
    public string email { get; set; }

    [CascadingParameter]
    protected EventCallback<string> setEmail { get; set; }

    public async Task ReceiveAuthenticationState(bool state)
    {
        authenticationState = state;
        _loading = false;
        await setEmail.InvokeAsync(email);
    }
}