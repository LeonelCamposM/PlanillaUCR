@using Application.ContextMenu
@using Presentation.Core.Components

@inject IContextMenuService ContextMenuService

@{
    string _projectName = ContextMenuService.GetProjectsContext();
}

<li class="nav-item px-3">
    <NavLink class="nav-link" href=@($"Projects/{email}") Match="NavLinkMatch.All">
    <MudIconButton Icon="@Icons.Filled.BusinessCenter" Color="@Color.Secondary" Class="mr-2"/>
    <span  aria-hidden="true"></span> Proyectos
    </NavLink>
</li>

<li class="nav-item px-3">
    <NavLink class="nav-link" href=@($"/{email}/Payment_History") Match="NavLinkMatch.All">
    <MudIconButton Icon="@Icons.Filled.Paid" Color="@Color.Secondary" Class="mr-2"/>
    <span  aria-hidden="true"></span> Historial Pagos
    </NavLink>
</li>
<li class="nav-item px-3">
    <NavLink class="nav-link" href="@($"/Last_Pay/{email}/")" Match="NavLinkMatch.All">
    <MudIconButton Icon="@Icons.Filled.CreditCard" Color="@Color.Secondary" Class="mr-2"/>
    <span  aria-hidden="true"></span> Último pago
    </NavLink>
</li>
@if (ContextMenuService.GetShowProjectsMenu())
{
    @if (!ContextMenuService.GetShowProjectsSubMenu())
    {
        <ProjectsDropDown icon="@Icons.Material.Filled.ArrowDropUp"></ProjectsDropDown>
    } else
    {
        <ProjectsDropDown icon="@Icons.Material.Filled.ArrowDropDown"></ProjectsDropDown>
        <TabNavLink Icon="@Icons.Material.Filled.Assignment" href="@($"/Projects/{email}/{ContextMenuService.GetEmployerEmailContext()}/{_projectName}")" text="Detalles"></TabNavLink>
        @if (ContextMenuService.GetHoursEmployeeContext())
        {
            <TabNavLink  Icon="@Icons.Filled.MoreTime" href="@($"/ReportHours/{ContextMenuService.GetEmployerEmailContext()}/{email}")"  text="Reporte de horas"></TabNavLink>
            <TabNavLink  Icon="@Icons.Filled.Timer" href="@($"/Reported_Hours/{email}/")" text="Histórico de horas"></TabNavLink>
        }        
        
        <TabNavLink  Icon="@Icons.Material.Filled.CardGiftcard" href="@($"/Projects/{email}/{_projectName}/Benefits")" text="Beneficios"></TabNavLink>
        <TabNavLink  Icon="@Icons.Material.Filled.CardMembership" href="@($"/Projects/{email}/{_projectName}/Deductions")" text="Deducciones Voluntarias"></TabNavLink>
    }
}

@code {
    [Parameter]
    public string email { get; set; }

    protected override async Task OnInitializedAsync()
    {
        ContextMenuService.SetOnChange(StateHasChanged);
    }
}