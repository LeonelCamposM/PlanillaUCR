@page "/subscriptions"
@using Domain.Subscriptions.DTOs
@using Application.Subscriptions
@using Domain.Subscriptions.Entities
@using Presentation.Core.Components

@inject ISubscriptionService SubscriptionService

<div class="container">
    <h1>Subscriptions</h1>
    <Loading IsLoading="_isLoading">
        @if (_isLoading)
        {
            <h4 class="text-danger">There are no projects currently registered.</h4>
        }
        else
        {
            <table>
                    <tr>
                        <td><strong>Employer</strong></td>
                        <td><strong>Subscription name</strong></td>
                        <td><strong>Cost</strong></td>
                        <td><strong>TypeSubscription</strong></td>
                    </tr>
                    
                    @foreach (var subscription in _subscriptions)
                    {
                        <tr>
                            <td align="center">@subscription.EmployerEmail</td>
                            <td align="center">@subscription.NameSubscription</td>
                            <td align="center">@subscription.Cost</td>
                            <td align="center">@subscription.TypeSubscription</td>
                        </tr>
                    }
            </table>
        }
    </Loading>
</div>

@code {

    private bool _isLoading = true;
    private IEnumerable<SubscriptionDTO> _subscriptions;

    protected override async Task OnInitializedAsync()
    {
        _subscriptions = await SubscriptionService.GetAllSubscriptionsAsync();
        _isLoading = false;
    }
}
