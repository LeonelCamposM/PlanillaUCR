@page "/Loggin"
@using Domain.Accounts.DTOs
@using Application.Accounts
@using Domain.Accounts.Entities
@using Presentation.Core.Components


@inject IAccountService AccountService

<MudGrid>
    <MudItem xs="12" sm="8">
        <MudPaper Height="250px" Width="90%" Outlined="false" Class="border-none pa-4" Elevation="0">
            <MudToolBar>
                <MudSpacer></MudSpacer> <MudTextField @bind-Value="inicio" Label=""   ReadOnly="true" Variant="Variant.Text" /> <MudSpacer></MudSpacer>
            </MudToolBar>
            <MudGrid>
                <MudItem xs="12">
                    <MudTextField @bind-Value="accountInfo.Email" Label="Correo electrónico"   Variant="Variant.Outlined"></MudTextField>
                </MudItem>

                <MudItem xs="12">
                    <MudTextField @bind-Value="accountInfo.Password" Label="Contraseña"  Variant="Variant.Outlined"></MudTextField>
                </MudItem>
                
                <MudItem xs="12" sm="6" md="4">
                    <MudButton Disabled="@_processing" OnClick="SaveAccountInfo"  Variant="Variant.Filled" Color="Color.Secondary">
                        @if (_processing)
                        {
                            <MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true" />
                            <MudText Class="ms-2">Procesando</MudText>
                        }
                        else
                        {
                            <MudText>Crear Cuenta</MudText>
                        }
                    </MudButton>
                </MudItem>



                <MudItem xs="12" sm="6" md="4">
                    <MudButton Disabled="@_processing" OnClick="SaveAccountInfo"  Variant="Variant.Filled" Color="Color.Secondary">
                        @if (_processing)
                        {
                            <MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true" />
                            <MudText Class="ms-2">Procesando</MudText>
                        }
                        else
                        {
                            <MudText>Ingresar</MudText>
                        }
                    </MudButton>
                </MudItem>

            </MudGrid>
        </MudPaper>
    </MudItem>
    @*File uploader *@
    <MudItem xs="3">
        @*FALTA PONER EL REGISTERFORM *@
    </MudItem>
</MudGrid>

@code{
    Account accountInfo = new Account("", "");
    public string email { get; set; }
    public string password { get; set; }
    public string inicio { get; set; } = "                      Inicio";
    private bool _isLoading = true;
    private bool _processing = false;


    /*

     async Task GoToRegisterForm()
    {
        _processing = true;
        //await AccountService.CreateAccountAsync(accountInfo);
        _processing = false;
    }

      async Task GoToProjects()
    {
        _processing = true;
        //await AccountService.CreateAccountAsync(accountInfo);
        _processing = false;
    }
*/

   
    async Task SaveAccountInfo()
    {
        _processing = true;
        await AccountService.CreateAccountAsync(accountInfo);
        _processing = false;
    }
   




}